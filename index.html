<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš¢ ëŒ€ì‚°í•­ Seetec í¬íŠ¸ í˜„í™©íŒ</title>
    <style>
        :root { --bg: #f4f7f6; --open: #2ecc71; --closed: #e74c3c; --none: #dfe6e9; --text: #2d3436; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); margin: 0; padding: 10px; color: var(--text); }
        .container { max-width: 800px; margin: 0 auto; background: #fff; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); overflow: hidden; }
        
        /* í—¤ë” ë° ë‚´ë¹„ê²Œì´ì…˜ */
        .header { background: #34495e; color: #fff; padding: 20px; text-align: center; }
        .month-nav { display: flex; flex-wrap: wrap; gap: 5px; justify-content: center; padding: 15px; background: #f8f9fa; }
        .m-btn { border: 1px solid #ddd; background: #fff; padding: 8px 12px; border-radius: 5px; cursor: pointer; font-size: 0.8rem; font-weight: bold; }
        .m-btn.active { background: #3498db; color: #fff; border-color: #3498db; }

        /* ë‹¬ë ¥ ê·¸ë¦¬ë“œ */
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); border-top: 1px solid #eee; }
        .weekday { background: #f1f2f6; text-align: center; padding: 10px 0; font-size: 0.8rem; font-weight: bold; border-bottom: 1px solid #eee; }
        .day-cell { border-right: 1px solid #eee; border-bottom: 1px solid #eee; min-height: 85px; position: relative; background: #fff; }
        .day-num { font-size: 0.75rem; font-weight: bold; padding: 5px; color: #636e72; }
        
        /* ì˜¤ì „/ì˜¤í›„ ìŠ¬ë¡¯ */
        .slot-container { display: flex; flex-direction: column; height: 60px; gap: 2px; padding: 2px; }
        .slot { flex: 1; display: flex; align-items: center; justify-content: center; font-size: 0.6rem; border-radius: 3px; font-weight: bold; cursor: pointer; transition: transform 0.1s; }
        .slot:active { transform: scale(0.95); }
        .slot.none { background: var(--none); color: #999; cursor: default; }
        .slot.open { background: var(--open); color: #fff; }
        .slot.closed { background: var(--closed); color: #fff; }

        /* ìƒì„¸ ëª¨ë‹¬ íŒì—… */
        #modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 1000; justify-content: center; align-items: center; }
        .modal-content { background: #fff; padding: 25px; border-radius: 15px; text-align: center; width: 85%; max-width: 300px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .modal-title { font-weight: bold; font-size: 1.1rem; margin-bottom: 15px; color: #333; }
        .modal-info { font-size: 1.3rem; font-weight: 800; margin: 15px 0; }
        .modal-close { background: #34495e; color: #fff; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-top: 10px; }

        .legend { display: flex; justify-content: center; gap: 15px; padding: 15px; font-size: 0.8rem; border-top: 1px solid #eee; }
        .leg-item { display: flex; align-items: center; gap: 5px; }
        .dot { width: 12px; height: 12px; border-radius: 3px; }
    </style>
</head>
<body>

<div class="container">
    <div class="header"><h2>ğŸš¢ 2026 ëŒ€ì‚°í•­ í¬íŠ¸ í˜„í™©íŒ</h2></div>
    <div class="month-nav" id="monthNav"></div>
    <div class="calendar-grid" id="calendar">
        <div class="weekday">ì¼</div><div class="weekday">ì›”</div><div class="weekday">í™”</div>
        <div class="weekday">ìˆ˜</div><div class="weekday">ëª©</div><div class="weekday">ê¸ˆ</div><div class="weekday">í† </div>
    </div>
    <div class="legend">
        <div class="leg-item"><div class="dot" style="background:var(--open)"></div>ì˜¤í”ˆ</div>
        <div class="leg-item"><div class="dot" style="background:var(--closed)"></div>í´ë¡œì§•(2.5mâ†‘)</div>
    </div>
</div>

<div id="modal" onclick="closeModal()">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div id="mDate" class="modal-title"></div>
        <div id="mStatus" style="font-weight:bold;"></div>
        <div id="mWave" class="modal-info"></div>
        <button class="modal-close" onclick="closeModal()">ë‹«ê¸°</button>
    </div>
</div>

<script>
    const year = 2026;
    let currentMonth = new Date().getMonth() + 1;

    function init() {
        const nav = document.getElementById('monthNav');
        for(let m=1; m<=12; m++) {
            const btn = document.createElement('button');
            btn.className = `m-btn ${m === currentMonth ? 'active' : ''}`;
            btn.innerText = `${m}ì›”`;
            btn.onclick = () => {
                document.querySelectorAll('.m-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                renderCalendar(m);
            };
            nav.appendChild(btn);
        }
        renderCalendar(currentMonth);
    }

    function showDetail(date, timeLabel, waveInfo, statusClass) {
        document.getElementById('mDate').innerText = `${date} (${timeLabel})`;
        document.getElementById('mStatus').innerText = statusClass === 'closed' ? 'ğŸ”´ í´ë¡œì§• ìƒíƒœ' : 'ğŸŸ¢ ì˜¤í”ˆ ìƒíƒœ';
        document.getElementById('mStatus').style.color = statusClass === 'closed' ? '#e74c3c' : '#2ecc71';
        document.getElementById('mWave').innerText = `íŒŒê³  ì •ë³´: ${waveInfo}`;
        document.getElementById('modal').style.display = 'flex';
    }

    function closeModal() {
        document.getElementById('modal').style.display = 'none';
    }

    async function renderCalendar(month) {
        const grid = document.getElementById('calendar');
        // ê¸°ì¡´ ì…€ ì œê±° (í—¤ë” ì œì™¸)
        grid.querySelectorAll('.day-cell').forEach(c => c.remove());

        const firstDay = new Date(year, month - 1, 1).getDay();
        const daysInMonth = new Date(year, month, 0).getDate();
        
        let data = {};
        try {
            // [ìˆ˜ë™ ê´€ë¦¬ìš© í•µì‹¬] í•­ìƒ ìµœì‹  data.jsonì„ ë¶ˆëŸ¬ì˜¤ê¸° ìœ„í•´ íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ ë¶™ì…ë‹ˆë‹¤.
            const res = await fetch(`data.json?v=${new Date().getTime()}`);
            if(res.ok) data = await res.json();
        } catch(e) {
            console.error("ë°ì´í„° ë¡œë”© ì‹¤íŒ¨:", e);
        }

        // ì‹œì‘ ê³µë°± ì…€ ìƒì„±
        for(let i=0; i<firstDay; i++) {
            grid.innerHTML += `<div class="day-cell" style="background:#f9f9f9"></div>`;
        }

        // ë‚ ì§œë³„ ì…€ ìƒì„±
        for(let d=1; d<=daysInMonth; d++) {
            const dateStr = `${year}-${String(month).padStart(2, '0')}-${String(d).padStart(2, '0')}`;
            const records = data[dateStr] || [];
            
            let slotsHtml = `<div class="slot-container">`;
            
            // "ì˜¤ì „", "ì˜¤í›„", "ì¢…ì¼" ìˆœì„œëŒ€ë¡œ ì²´í¬
            const periods = [
                { key: "ì˜¤ì „", label: "AM" },
                { key: "ì˜¤í›„", label: "PM" },
                { key: "ì¢…ì¼", label: "ì¢…ì¼" }
            ];

            let hasData = false;
            periods.forEach(p => {
                // ìˆ˜ë™ ì…ë ¥í•œ "ì˜¤ì „(ì‹¤ì )" ë“± í…ìŠ¤íŠ¸ë¥¼ í¬í•¨í•˜ê³  ìˆëŠ”ì§€ í™•ì¸
                const record = records.find(r => r.t.includes(p.key));
                if(record) {
                    hasData = true;
                    const isClosed = record.s === "Closed";
                    const statusClass = isClosed ? 'closed' : 'open';
                    const emoji = isClosed ? 'ğŸ”´' : 'ğŸŸ¢';
                    slotsHtml += `<div class="slot ${statusClass}" onclick="showDetail('${dateStr}', '${record.t}', '${record.r}', '${statusClass}')">${emoji} ${p.label}</div>`;
                }
            });

            // ë°ì´í„°ê°€ ì•„ì˜ˆ ì—†ëŠ” ë‚ ì€ íšŒìƒ‰ AM/PM í‘œì‹œ
            if (!hasData) {
                slotsHtml += `<div class="slot none">AM</div><div class="slot none">PM</div>`;
            }
            
            slotsHtml += `</div>`;

            grid.innerHTML += `
                <div class="day-cell">
                    <div class="day-num">${d}</div>
                    ${slotsHtml}
                </div>`;
        }
    }

    window.onload = init;
</script>
</body>
</html>
